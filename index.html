<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FamGame - Couples Reward System</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
        .container { max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; color: #004d40; }
        .task, .reward { padding: 10px; margin: 10px 0; background: #e8f5e9; border-radius: 5px; cursor: pointer; display: flex; justify-content: space-between; }
        .task:hover, .reward:hover { background: #c8e6c9; }
        #points { text-align: center; font-size: 24px; font-weight: bold; color: #004d40; }
        .section { margin-top: 20px; }
        button { background-color: #004d40; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #00332a; }
        .progress { text-align: center; font-size: 18px; margin-top: 10px; color: #004d40; }
    </style>
</head>
<body>
    <div class="container">
        <h1>FamGame - Couples Reward System</h1>
        <h2>Total Points: <span id="totalPoints">0</span></h2>
        <div class="progress">
            Husband Contribution: <span id="husbandPercent">0</span> | Wife Contribution: <span id="wifePercent">0</span>
        </div>

        <div class="section">
            <h2>Husband Tasks</h2>
            <div class="husband-tasks"></div>
        </div>

        <div class="section">
            <h2>Wife Tasks</h2>
            <div class="wife-tasks"></div>
        </div>

        <div class="section">
            <h2>Rewards</h2>
            <div class="rewards-section"></div>
        </div>

        <div class="section">
            <button onclick="resetPoints()">Reset Points</button>
        </div>
    </div>

<script>
    let sheetId = "1YVO59qBs1atrOgY6rJLUI75-KzKBF78iN5ZH8r6Yv0o";
    let clientId = "203005866385-jm1rkp0u1j94i8iilgs4dn9l7j5ivm2a.apps.googleusercontent.com";
    let redirectUri = "https://gk895.github.io/FamGame/";
    let scope = "https://www.googleapis.com/auth/spreadsheets";
    let apiKey = "AIzaSyCtGnPiwGVuByuzMxeprkhfVP4ZTfrAXus";
    let accessToken = null;

    let tasks = [
        { text: "Give a 10-minute massage", points: 10, person: "husband" },
        { text: "Plan a surprise date night", points: 15, person: "husband" },
        { text: "Write a heartfelt love letter", points: 10, person: "husband" },
        { text: "Do the dishes for a week", points: 10, person: "husband" },
        { text: "Make her coffee in the morning", points: 5, person: "husband" },
        { text: "Run her a warm bath", points: 15, person: "husband" },
        { text: "Clean the house before she asks", points: 10, person: "husband" },
        { text: "Organize a surprise date night", points: 15, person: "husband" },
        { text: "Send a cute voice message", points: 5, person: "husband" },
        { text: "Plan a romantic walk together", points: 10, person: "husband" },

        { text: "Cook his favorite meal", points: 10, person: "wife" },
        { text: "Plan a romantic movie night", points: 15, person: "wife" },
        { text: "Leave a sweet note for him", points: 5, person: "wife" },
        { text: "Surprise him with his favorite dessert", points: 10, person: "wife" },
        { text: "Give him a head massage", points: 15, person: "wife" },
        { text: "Dress up for a romantic evening", points: 10, person: "wife" },
        { text: "Compliment him multiple times", points: 5, person: "wife" },
        { text: "Take over one of his chores for the day", points: 10, person: "wife" },
        { text: "Organize a gaming night for him", points: 15, person: "wife" },
        { text: "Cuddle with him for 30 minutes", points: 10, person: "wife" }
    ];

    let rewards = [
        { text: "Movie Night (Cuddles & Snacks)", cost: 50 },
        { text: "Breakfast in Bed", cost: 40 },
        { text: "Full-Body Massage (30 Minutes)", cost: 70 },
        { text: "Romantic Dinner Date", cost: 100 },
        { text: "Passionate Kissing Session", cost: 30 },
        { text: "'Yes Day' (Say Yes to Everything for a Day)", cost: 200 },
        { text: "Strip Poker or Romantic Game Night", cost: 150 },
        { text: "Bubble Bath Together", cost: 80 },
        { text: "Bedroom Roleplay Night", cost: 200 },
        { text: "Weekend Getaway or Staycation", cost: 500 },
        { text: "24-Hour King/Queen Treatment", cost: 300 },
        { text: "Slow Dance to a Romantic Song", cost: 40 },
        { text: "Naughty Surprise Night", cost: 250 }
    ];

    function loadTasks() {
        let husbandSection = document.querySelector(".husband-tasks");
        let wifeSection = document.querySelector(".wife-tasks");

        tasks.forEach(task => {
            let taskElement = document.createElement("div");
            taskElement.classList.add("task");
            taskElement.innerHTML = `${task.text} <span>+${task.points} pts</span>`;
            taskElement.onclick = () => addPoints(task.person, task.points);

            if (task.person === "husband") {
                husbandSection.appendChild(taskElement);
            } else {
                wifeSection.appendChild(taskElement);
            }
        });
    }

    function loadRewards() {
        let rewardsSection = document.querySelector(".rewards-section");

        rewards.forEach(reward => {
            let rewardElement = document.createElement("div");
            rewardElement.classList.add("reward");
            rewardElement.innerHTML = `${reward.text} <span>-${reward.cost} pts</span>`;
            rewardElement.onclick = () => redeemPoints(reward.cost);
            rewardsSection.appendChild(rewardElement);
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
        loadTasks();
        loadRewards();
    });

    accessToken = getAccessTokenFromURL();
    if (!accessToken) {
        authenticate();
    } else {
        fetchPoints();
    }
</script>
</body>
</html>
